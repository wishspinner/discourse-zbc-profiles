
<script type="text/x-handlebars" data-template-name="user" version="2.2.0">
    <div class="container {{if viewingSelf 'viewing-self'}}">
      {{#d-section class="user-main"}}
    
    {{#if currentUser.staff}}
    <div class="user-admin">
        <div class="dropdown">
        <button class="dropbtn">Admin</button>
        <div class="dropdown-content">
            {{#if model.displayGroups}}
             <a name="groups">
                <div><dt class="groups">{{i18n 'groups.title' count=model.displayGroups.length}}</dt>
                <dd class='groups'>
                  {{#each model.displayGroups as |group|}}
                    <span>{{#link-to 'group' group.name class="group-link"}}{{group.name}}{{/link-to}}</span>
                  {{/each}}
    
                  {{#link-to "groups" (query-params username=model.username)}}
                    ...
                  {{/link-to}}
                </dd>
                </div>
             </a>
            {{/if}}
            
            {{#if canDeleteUser}}
            <a name="delete">
                <div>{{d-button action="adminDelete" icon="exclamation-triangle" label="user.admin_delete" class="btn-danger"}}</div>
            </a>
            {{/if}}          
            
            
            {{#if canCheckEmails}}
            <a class="btn">
                <i class="fa fa-envelope"></i>
                {{#if model.email}}
                    {{model.email}}
                {{else}}
                    {{d-button action="checkEmail" actionParam=model icon="envelope-o" label="admin.users.check_email.text" class="btn-primary"}}
                {{/if}}
                
                {{plugin-outlet name="user-post-names" args=(hash model=model)}}
            </a>
            {{/if}}         
    
    
            {{#if model.suspended}}
            <a name="suspended">
            <li>
                <div class='suspended btn'>
                  {{d-icon "ban"}}
                  <b>
                    {{#if model.suspendedForever}}
                      {{i18n 'user.suspended_permanently'}}
                    {{else}}
                      {{i18n 'user.suspended_notice' date=model.suspendedTillDate}}
                    {{/if}}
                  </b><br>
                  {{#if model.suspend_reason}}
                    <b>{{i18n 'user.suspended_reason'}}</b> {{model.suspend_reason}}
                  {{/if}}
                </div>
            </li>
            </a>
            {{/if}}
            
            {{#if isNotSuspendedOrIsStaff}}
            <a class="btn">
                No active suspension {{{model.bio_cooked}}}
            </a>
            {{/if}}        
    
            {{#if currentUser.staff}}
                <a href={{model.adminPath}}>{{d-icon "wrench"}}{{i18n 'admin.user.show_admin_profile'}}</a>
                {{plugin-outlet name="user-profile-controls"
                    connectorTagName="a"
                    args=(hash model=model)}}                
            {{/if}}        
    
            {{#if publicUserFields}}
              <a name="public-fields">
              <div class="public-user-fields btn">
                {{#each publicUserFields as |uf|}}
                  {{#if uf.value}}
                    <div class="public-user-field {{uf.field.dasherized_name}}">
                      <span class="user-field-name">{{uf.field.name}}</span>:
                      <span class="user-field-value">{{uf.value}}</span>
                    </div>
                  {{/if}}
                {{/each}}
    
                {{plugin-outlet name="user-profile-public-fields"
                                args=(hash publicUserFields=publicUserFields
                                      model=model)}}
              </div>
              </a>
            {{/if}}
    
        
            
            
            {{#unless collapsedInfo}}
            <a class='secondary'>
                {{plugin-outlet name="user-profile-secondary" args=(hash model=model)}}
            </a>
            {{/unless}}            
        </div>
        </div>
    </div>
    {{/if}}
        <!--// admin menu -->
        
        {{plugin-outlet name="user-profile-primary" args=(hash model=model)}}
    
    
    
    
        <section class="{{if collapsedInfo 'collapsed-info'}} about {{if hasProfileBackground 'has-background' 'no-background'}}"  style={{model.profileBackground}}>
            <div class="clear-user-bg"></div>
        </section>
    
    
    <div class="user-container">
        <div class="user-sidebar quarter">
            <div class="full caps">
                <h1 class="{{if nameFirst "full-name" "username"}}">{{if nameFirst model.name (format-username model.username)}} {{user-status model currentUser=currentUser}}</h1>
                <span class="user-meta">
                    {{#if model.last_seen_at}}
                        Last online: {{bound-date model.last_seen_at}}
                    {{/if}}
                    <i class="fa fa-eye"></i> {{model.profile_view_count}}
                
                    <h2 class="{{if nameFirst "username" "full-name"}}">{{#if nameFirst}}{{model.username}}{{else}}{{model.name}}{{/if}}</h2>
                    {{#if model.staged}}
                        <h2 class="staged">{{i18n 'user.staged'}}</h2>
                    {{/if}}
                    {{#if model.title}}
                     <h3>{{model.title}}</h3>
                    {{/if}}
                </span>
            </div>
            <div class="profile-image avatar-width half">{{user-profile-avatar user=model}}</div>
            
            <div class="half">
                <h3 class="location-and-website">
                {{#if model.created_at}}
                    Member since<br> {{bound-date model.created_at}}
                    <div class="clear-sm"></div>
                {{/if}}
                {{#if model.location}}{{model.location}}{{/if}}
                <div class="clear"></div>
                {{#if model.website_name}}
                  {{#if linkWebsite}}
                    <a href={{model.website}} rel={{unless removeNoFollow 'nofollow noopener'}} target="_blank">{{model.website_name}}</a>
                  {{else}}
                    <span title={{model.website}}>{{model.website_name}}</span>
                  {{/if}}
                {{/if}}
                {{plugin-outlet name="user-location-and-website" args=(hash model=model)}}
                </h3>
            </div>
            
            <div class="full">
                <div class="clear-sm"></div>
                  {{#if model.can_send_private_message_to_user}}
                    <a class='btn btn-block btn-primary compose-pm half' {{action "composePrivateMessage" model}}>
                      {{d-icon "envelope"}}
                      {{i18n 'user.private_message'}}
                    </a>
                  {{/if}}
                  
                  {{#if siteSettings.discourse_follow_enabled}}
                    {{follow-toggle user=model}}
                  {{/if}}
    
                  <div class="clear-sm"></div>
                    {{#if canExpandProfile}}
                    <div class="clear-sm"></div>
                    <li>
                      {{#if collapsedInfo}}
                        <a {{action "expandProfile"}} href class="btn btn-default">
                          {{d-icon "angle-double-down"}} {{i18n 'user.expand_profile'}}
                        </a>
                      {{else}}
                        <a {{action "collapseProfile"}} href class="btn btn-default">
                          {{d-icon "angle-double-up"}} {{i18n 'user.collapse_profile'}}
                        </a>
                      {{/if}}
                    </li>
                  {{/if}}
    
    
    {{#unless collapsedInfo}}
          <div class='secondary'>
            <dl>
              {{#if model.created_at}}
                <div><dt>{{i18n 'user.created'}}</dt><dd>{{bound-date model.created_at}}</dd></div>
              {{/if}}
              {{#if model.last_posted_at}}
                <div><dt>{{i18n 'user.last_posted'}}</dt><dd>{{bound-date model.last_posted_at}}</dd></div>
              {{/if}}
              {{#if model.last_seen_at}}
                <div><dt>{{i18n 'user.last_seen'}}</dt><dd>{{bound-date model.last_seen_at}}</dd></div>
              {{/if}}
              <div><dt>{{i18n 'views'}}</dt><dd>{{model.profile_view_count}}</dd></div>
              {{#if model.invited_by}}
                <div><dt class="invited-by">{{i18n 'user.invited_by'}}</dt><dd class="invited-by">{{#link-to 'user' model.invited_by}}{{model.invited_by.username}}{{/link-to}}</dd></div>
              {{/if}}
              {{#if model.trust_level}}
                <div><dt class="trust-level">{{i18n 'user.trust_level'}}</dt><dd class="trust-level">{{model.trustLevel.name}}</dd></div>
              {{/if}}
              {{#if canCheckEmails}}
                <div><dt>{{i18n 'user.email.title'}}</dt>
                <dd title={{model.email}}>
                  {{#if model.email}}
                    {{model.email}}
                  {{else}}
                    {{d-button action="checkEmail" actionParam=model icon="envelope-o" label="admin.users.check_email.text" class="btn-primary"}}
                  {{/if}}
                </dd>
                </div>
              {{/if}}
    
              {{#if model.displayGroups}}
                <div><dt class="groups">{{i18n 'groups.title' count=model.displayGroups.length}}</dt>
                <dd class='groups'>
                  {{#each model.displayGroups as |group|}}
                    <span>{{#link-to 'group' group.name class="group-link"}}{{group.name}}{{/link-to}}</span>
                  {{/each}}
    
                  {{#link-to "groups" (query-params username=model.username)}}
                    ...
                  {{/link-to}}
                </dd>
                </div>
              {{/if}}
    
              {{#if canDeleteUser}}
                <div>{{d-button action="adminDelete" icon="exclamation-triangle" label="user.admin_delete" class="btn-danger"}}</div>
              {{/if}}
            </dl>
            {{plugin-outlet name="user-profile-secondary" args=(hash model=model)}}
          </div>
          {{/unless}}
    
    
    
            </div>
        </div><!--// quarter -->
                
    
          
    
    
        
    <div class="user-gallerycontainer">
        {{#mobile-nav class='main-nav' desktopClass="nav nav-pills user-nav" currentPath=currentPath}}
        {{plugin-outlet name="user-main-nav" tagName='' connectorTagName='li' args=(hash model=model)}}
          {{#unless model.profile_hidden}}
            <li>{{#link-to 'user.summary'}}{{i18n 'user.summary.title'}}{{/link-to}}</li>
            <li>{{#link-to 'userActivity'}}{{i18n 'user.activity_stream'}}{{/link-to}}</li>
          {{/unless}}
          {{#if showNotificationsTab}}
            <li>
              {{#link-to 'userNotifications'}}
                {{d-icon "comment" class="glyph"}}{{i18n 'user.notifications'}}
              {{/link-to}}
            </li>
          {{/if}}
          {{#if showPrivateMessages}}
            <li>{{#link-to 'userPrivateMessages'}}{{d-icon "envelope-o"}}{{i18n 'user.private_messages'}}{{/link-to}}</li>
          {{/if}}
          {{#if canInviteToForum}}
            <li>{{#link-to 'userInvited'}}{{d-icon "user-plus"}}{{i18n 'user.invited.title'}}{{/link-to}}</li>
          {{/if}}
          {{#if showBadges}}
            <li>{{#link-to 'user.badges'}}{{d-icon "certificate"}}{{i18n 'badges.title'}}{{/link-to}}</li>
          {{/if}}
          
          {{#if model.can_edit}}
            <li>{{#link-to 'preferences'}}{{d-icon "cog"}}{{i18n 'user.preferences'}}{{/link-to}}</li>
          {{/if}}
        {{/mobile-nav}}
        
        <div class='user-table'>
          <div class='wrapper'>
            {{outlet}}
          </div>
        </div>
    </div><!--// user-gallery-container -->
    </div><!--// user-container -->
      {{/d-section}}
    </div>
    
    </script>
